<!doctype html>
<html lang="en" data-theme="nos">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Linux CLI OTP generator</title>

  <meta name="color-scheme" content="light">
  <meta name="theme-color" content="#E7180B">

    <link rel="stylesheet" href="../../style.css" />
  </head>

<body>
  <a class="skip-link" href="#content">Skip to content</a>

  <!-- Header: ONLY breadcrumbs -->
  <header class="site-header">
    <div class="site-header__inner">
          </div>
  </header>

  <!-- Progress bar lives outside header; looks ‚Äúnews-site-ish‚Äù -->
  <div class="reading-progress" aria-hidden="true">
    <div class="reading-progress__bar"></div>
  </div>

    <nav class="breadcrumbs"><a href="../../index.html">Home</a> ‚Ä∫ <a href="../index.html">Linux</a> ‚Ä∫ Otp generator</nav>
  
  <main id="content" class="content" role="main">
    <h1 id="create-an-otp-mfa-tool-in-the-bash-terminal">Create an OTP
    MFA Tool in the Bash Terminal</h1>
    <p>I was tired of using <strong>Google Authenticator</strong>, so I
    found a simple way to generate my own <strong>OTP (One-Time
    Password)</strong> codes directly in <strong>Bash</strong>.<br />
    Just replace the example string below (<code>JHJH...</code>) with
    your own secret key.</p>
    <div class="sourceCode" id="cb1"><pre
    class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/oathtool</span> <span class="at">-b</span> <span class="at">--totp</span> <span class="st">&#39;JHJHJHJHJHJHJHJHJHJHJHJHJ&#39;</span></span></code></pre></div>
    <p>If you want to copy the token directly to your clipboard, just
    use <strong>xclip</strong>:</p>
    <div class="sourceCode" id="cb2"><pre
    class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/oathtool</span> <span class="at">-b</span> <span class="at">--totp</span> <span class="st">&#39;JHJHJHJHJHJHJHJHJHJHJHJHJ&#39;</span> <span class="kw">|</span> <span class="ex">xclip</span> <span class="at">-selection</span> c</span></code></pre></div>
    <p>This way, you can easily run your own OTP generator right in the
    terminal.</p>
    <hr />
    <h2 id="encrypting-your-secret-with-gpg">üîê Encrypting Your Secret
    with GPG</h2>
    <p>If you want to keep your secret key secure, you can encrypt it
    with <strong>GPG</strong>. Here‚Äôs a simple working example ‚Äî make
    sure both <strong>gpg</strong> and <strong>oathtool</strong> are
    installed first.</p>
    <div class="sourceCode" id="cb3"><pre
    class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This example decrypts a GPG file (example.gpg) and generates an OTP token</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="va">secret</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$(</span><span class="ex">gpg</span> <span class="at">-d</span> ./example.gpg <span class="dv">2</span><span class="op">&gt;</span>/dev/null<span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="va">token</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$(</span><span class="ex">/usr/bin/oathtool</span> <span class="at">-b</span> <span class="at">--totp</span> <span class="va">$secret)</span><span class="st">&quot;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$token</span></span></code></pre></div>
    <hr />
    <h2 id="turning-it-into-a-script">üß© Turning It Into a Script</h2>
    <p>If you‚Äôd like to make this a small reusable script, here‚Äôs an
    example that can either print the token to the screen or copy it to
    your clipboard automatically.</p>
    <div class="sourceCode" id="cb4"><pre
    class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">gentoken()</span> <span class="kw">{</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate an OTP token from a GPG-encrypted file</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">secret</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$(</span><span class="ex">gpg</span> <span class="at">-d</span> ./otp_secret_example.gpg <span class="dv">2</span><span class="op">&gt;</span>/dev/null<span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">token</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$(</span><span class="ex">/usr/bin/oathtool</span> <span class="at">-b</span> <span class="at">--totp</span> <span class="va">$secret)</span><span class="st">&quot;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">Help()</span> <span class="kw">{</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simple help menu</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;OTP token generator for user John (Office Portal).&quot;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;Syntax: </span><span class="va">$0</span><span class="st"> [-h|c|p]&quot;</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;Options:&quot;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;  -h     Show this help message&quot;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;  -c     Copy token to clipboard&quot;</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;  -p     Print token to screen&quot;</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="fu">prtoken()</span> <span class="kw">{</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Print token to screen</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="ex">gentoken</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$token</span><span class="st">&quot;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="fu">cptoken()</span> <span class="kw">{</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Copy token to clipboard using xclip</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    <span class="ex">gentoken</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$token</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="ex">xclip</span> <span class="at">-selection</span> c </span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse command-line options</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="bu">getopts</span> <span class="st">&quot;:hpc&quot;</span> <span class="va">option</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="va">$option</span> <span class="kw">in</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>        <span class="ss">h</span><span class="kw">)</span> <span class="ex">Help</span><span class="kw">;</span> <span class="bu">exit</span><span class="cf">;;</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>        <span class="ss">p</span><span class="kw">)</span> <span class="ex">prtoken</span><span class="kw">;</span> <span class="bu">exit</span><span class="cf">;;</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>        <span class="ss">c</span><span class="kw">)</span> <span class="ex">cptoken</span><span class="kw">;</span> <span class="bu">exit</span><span class="cf">;;</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>        <span class="dt">\?</span><span class="kw">)</span> <span class="bu">echo</span> <span class="st">&quot;Error: Invalid option. Use -h for help.&quot;</span><span class="kw">;</span> <span class="bu">exit</span><span class="cf">;;</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">esac</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre></div>
    <hr />
    <h2 id="summary">üß† Summary</h2>
    <p>This Bash-based OTP generator:</p>
    <ul>
    <li>Uses <code>oathtool</code> to create TOTP codes</li>
    <li>Can optionally decrypt your secret with <code>gpg</code></li>
    <li>Lets you print or copy the token easily</li>
    </ul>
    <p>It‚Äôs a lightweight and private alternative to Google
    Authenticator ‚Äî all from your terminal! üíª‚ú®</p>
    <hr />
    <h2 id="optional-installing-the-required-tools">‚öôÔ∏è Optional:
    Installing the Required Tools</h2>
    <p>If you don‚Äôt have the needed tools installed yet, you can install
    them on most Linux systems using:</p>
    <div class="sourceCode" id="cb5"><pre
    class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install oathtool gpg xclip</span></code></pre></div>
    <hr />
    <p><em>Made with üíö for terminal lovers who like privacy and
    simplicity.</em></p>
  </main>

  
  <footer class="site-footer">
    <div class="site-footer__inner">
      <p class="footer-links">
        <a href="https://pandoc.org/">Pandoc</a>
        <span aria-hidden="true">‚Ä¢</span>
        <a href="https://github.com/Benjamin-Italiaander/peronal-links/wiki">Personal Links</a>
      </p>
    </div>
  </footer>

  <script src="/assets/site.js" defer></script>
</body>
</html>
